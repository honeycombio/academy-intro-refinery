RulesVersion: 2
Samplers:
  __default__:
    RulesBasedSampler:
      Rules:
        - Name: Keep all when http.response.status_code >= 500
          SampleRate: 1
          Conditions:
            - Field: http.response.status_code
              Operator: ">="
              Value: 500
              Datatype: int
        - Name: Sample the rest dynamically
          Sampler:
            EMADynamicSampler:
              GoalSampleRate: 15
              FieldList:
                - app.function
                - app.user_id
